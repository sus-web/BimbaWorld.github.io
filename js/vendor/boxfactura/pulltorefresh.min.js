/*
 pulltorefreshjs v0.1.22
 (c) Rafael Soto
 Released under the MIT License.
*/
'use strict';(function(a,f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f():"function"===typeof define&&define.amd?define(f):(a=a||self,a.PullToRefresh=f())})(this,function(){var a={pullStartY:null,pullMoveY:null,handlers:[],styleEl:null,events:null,dist:0,state:"pending",timeout:null,distResisted:0,supportsPassive:!1,supportsPointerEvents:"undefined"!==typeof window&&!!window.PointerEvent};try{window.addEventListener("test",null,{get passive(){a.supportsPassive=!0}})}catch(b){}var f=
{setupDOM:function(b){if(!b.ptrElement){var d=document.createElement("div");b.mainElement!==document.body?b.mainElement.parentNode.insertBefore(d,b.mainElement):document.body.insertBefore(d,document.body.firstChild);d.classList.add(b.classPrefix+"ptr");d.innerHTML=b.getMarkup().replace(/__PREFIX__/g,b.classPrefix);b.ptrElement=d;if("function"===typeof b.onInit)b.onInit(b);a.styleEl||(a.styleEl=document.createElement("style"),a.styleEl.setAttribute("id","pull-to-refresh-js-style"),document.head.appendChild(a.styleEl));
a.styleEl.textContent=b.getStyles().replace(/__PREFIX__/g,b.classPrefix).replace(/\s+/g," ")}return b},onReset:function(b){b.ptrElement&&(b.ptrElement.classList.remove(b.classPrefix+"refresh"),b.ptrElement.style[b.cssProp]="0px",setTimeout(function(){b.ptrElement&&b.ptrElement.parentNode&&(b.ptrElement.parentNode.removeChild(b.ptrElement),b.ptrElement=null);a.state="pending"},b.refreshTimeout))},update:function(b){var d=b.ptrElement.querySelector("."+b.classPrefix+"icon"),e=b.ptrElement.querySelector("."+
b.classPrefix+"text");d&&(d.innerHTML="refreshing"===a.state?b.iconRefreshing:b.iconArrow);if(e){"releasing"===a.state&&(e.innerHTML=b.instructionsReleaseToRefresh);if("pulling"===a.state||"pending"===a.state)e.innerHTML=b.instructionsPullToRefresh;"refreshing"===a.state&&(e.innerHTML=b.instructionsRefreshing)}}},p,l=function(b){return a.pointerEventsEnabled&&a.supportsPointerEvents?b.screenY:b.touches[0].screenY},q=function(){function b(g){var h=a.handlers.filter(function(t){return t.contains(g.target)})[0];
a.enable=!!h;h&&"pending"===a.state&&(c=f.setupDOM(h),h.shouldPullToRefresh()&&(a.pullStartY=l(g)),clearTimeout(a.timeout),f.update(h))}function d(g){c&&c.ptrElement&&a.enable&&(a.pullStartY?a.pullMoveY=l(g):c.shouldPullToRefresh()&&(a.pullStartY=l(g)),"refreshing"===a.state?g.cancelable&&c.shouldPullToRefresh()&&a.pullStartY<a.pullMoveY&&g.preventDefault():("pending"===a.state&&(c.ptrElement.classList.add(c.classPrefix+"pull"),a.state="pulling",f.update(c)),a.pullStartY&&a.pullMoveY&&(a.dist=a.pullMoveY-
a.pullStartY),a.distExtra=a.dist-c.distIgnore,0<a.distExtra&&(g.cancelable&&g.preventDefault(),c.ptrElement.style[c.cssProp]=a.distResisted+"px",a.distResisted=c.resistanceFunction(a.distExtra/c.distThreshold)*Math.min(c.distMax,a.distExtra),"pulling"===a.state&&a.distResisted>c.distThreshold&&(c.ptrElement.classList.add(c.classPrefix+"release"),a.state="releasing",f.update(c)),"releasing"===a.state&&a.distResisted<c.distThreshold&&(c.ptrElement.classList.remove(c.classPrefix+"release"),a.state="pulling",
f.update(c)))))}function e(){if(c&&c.ptrElement&&a.enable){clearTimeout(p);p=setTimeout(function(){if(c&&c.ptrElement&&"pending"===a.state)f.onReset(c)},500);if("releasing"===a.state&&a.distResisted>c.distThreshold)a.state="refreshing",c.ptrElement.style[c.cssProp]=c.distReload+"px",c.ptrElement.classList.add(c.classPrefix+"refresh"),a.timeout=setTimeout(function(){var g=c.onRefresh(function(){return f.onReset(c)});g&&"function"===typeof g.then&&g.then(function(){return f.onReset(c)});if(!g&&!c.onRefresh.length)f.onReset(c)},
c.refreshTimeout);else{if("refreshing"===a.state)return;c.ptrElement.style[c.cssProp]="0px";a.state="pending"}f.update(c);c.ptrElement.classList.remove(c.classPrefix+"release");c.ptrElement.classList.remove(c.classPrefix+"pull");a.pullStartY=a.pullMoveY=null;a.dist=a.distResisted=0}}function m(){c&&c.mainElement.classList.toggle(c.classPrefix+"top",c.shouldPullToRefresh())}var c,k=a.supportsPassive?{passive:a.passive||!1}:void 0;a.pointerEventsEnabled&&a.supportsPointerEvents?(window.addEventListener("pointerup",
e),window.addEventListener("pointerdown",b),window.addEventListener("pointermove",d,k)):(window.addEventListener("touchend",e),window.addEventListener("touchstart",b),window.addEventListener("touchmove",d,k));window.addEventListener("scroll",m);return{onTouchEnd:e,onTouchStart:b,onTouchMove:d,onScroll:m,destroy:function(){a.pointerEventsEnabled&&a.supportsPointerEvents?(window.removeEventListener("pointerdown",b),window.removeEventListener("pointerup",e),window.removeEventListener("pointermove",d,
k)):(window.removeEventListener("touchstart",b),window.removeEventListener("touchend",e),window.removeEventListener("touchmove",d,k));window.removeEventListener("scroll",m)}}},n={distThreshold:60,distMax:80,distReload:50,distIgnore:0,mainElement:"body",triggerElement:"body",ptrElement:".ptr",classPrefix:"ptr--",cssProp:"min-height",iconArrow:"&#8675;",iconRefreshing:"&hellip;",instructionsPullToRefresh:"Pull down to refresh",instructionsReleaseToRefresh:"Release to refresh",instructionsRefreshing:"Refreshing",
refreshTimeout:500,getMarkup:function(){return'\n<div class="__PREFIX__box">\n  <div class="__PREFIX__content">\n    <div class="__PREFIX__icon"></div>\n    <div class="__PREFIX__text"></div>\n  </div>\n</div>\n'},getStyles:function(){return"\n.__PREFIX__ptr {\n  box-shadow: inset 0 -3px 5px rgba(0, 0, 0, 0.12);\n  pointer-events: none;\n  font-size: 0.85em;\n  font-weight: bold;\n  top: 0;\n  height: 0;\n  transition: height 0.3s, min-height 0.3s;\n  text-align: center;\n  width: 100%;\n  overflow: hidden;\n  display: flex;\n  align-items: flex-end;\n  align-content: stretch;\n}\n\n.__PREFIX__box {\n  padding: 10px;\n  flex-basis: 100%;\n}\n\n.__PREFIX__pull {\n  transition: none;\n}\n\n.__PREFIX__text {\n  margin-top: .33em;\n  color: rgba(0, 0, 0, 0.3);\n}\n\n.__PREFIX__icon {\n  color: rgba(0, 0, 0, 0.3);\n  transition: transform .3s;\n}\n\n/*\nWhen at the top of the page, disable vertical overscroll so passive touch\nlisteners can take over.\n*/\n.__PREFIX__top {\n  touch-action: pan-x pan-down pinch-zoom;\n}\n\n.__PREFIX__release .__PREFIX__icon {\n  transform: rotate(180deg);\n}\n"},
onInit:function(){},onRefresh:function(){return location.reload()},resistanceFunction:function(b){return Math.min(1,b/2.5)},shouldPullToRefresh:function(){return!window.scrollY}},u=["mainElement","ptrElement","triggerElement"],r=function(b){var d={};Object.keys(n).forEach(function(e){d[e]=b[e]||n[e]});d.refreshTimeout="number"===typeof b.refreshTimeout?b.refreshTimeout:n.refreshTimeout;u.forEach(function(e){"string"===typeof d[e]&&(d[e]=document.querySelector(d[e]))});a.events||(a.events=q());d.contains=
function(e){return d.triggerElement.contains(e)};d.destroy=function(){clearTimeout(a.timeout);var e=a.handlers.indexOf(d);a.handlers.splice(e,1)};return d};return{setPassiveMode:function(b){a.passive=b},setPointerEventsMode:function(b){a.pointerEventsEnabled=b},destroyAll:function(){a.events&&(a.events.destroy(),a.events=null);a.handlers.forEach(function(b){b.destroy()})},init:function(b){void 0===b&&(b={});b=r(b);a.handlers.push(b);return b},_:{setupHandler:r,setupEvents:q,setupDOM:f.setupDOM,onReset:f.onReset,
update:f.update}}});